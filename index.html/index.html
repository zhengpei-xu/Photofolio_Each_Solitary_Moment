<!doctype html>
<html lang="zh">

<head>
    <meta charset="utf-8" />
    <title>My Photofolio - Each Solitary Moment</title>

    <base href="/">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="lib/turn.min.js"></script>
</head>

<body>
    <div id="flipbook">
    </div>

    <script>
        // 动态创建 108 个页面（从 1 到 108）
        (function createPages() {
            const totalPages = 108;
            const container = document.getElementById('flipbook');

            for (let i = 1; i <= totalPages; i++) {
                const page = document.createElement('div');
                page.className = 'page';

                // 使用 <img> 标签，以更好地控制图片大小和加载
                const img = document.createElement('img');
                img.src = `EachSolitaryMoment${i}.jpg`;
                img.alt = `Photo Page ${i}`;

                // 确保图片宽度和高度填满 page div
                img.style.width = '100%';
                img.style.height = '100%';

                // **关键：使用 contain 保持图片比例完整，并适应页面尺寸**
                img.style.objectFit = 'contain';

                page.appendChild(img);

                page.setAttribute('data-page', String(i));
                container.appendChild(page);
            }
        })();

        // 当所有图片与 DOM 加载完后初始化 turn.js
        window.addEventListener('load', function () {
            const desiredWidth = 1610;
            const desiredHeight = 900;

            // 初始化 turn.js
            $('#flipbook').turn({
                width: desiredWidth,
                height: desiredHeight,
                autoCenter: true,
                display: 'double', // 双页显示
                acceleration: true,
                gradients: true,
                elevation: 50
            });

            // 键盘左右翻页
            $(document).on('keydown', function (e) {
                if (e.key === 'ArrowLeft') $('#flipbook').turn('previous');
                else if (e.key === 'ArrowRight') $('#flipbook').turn('next');
            });
        });
    </script>
</body>

</html>
